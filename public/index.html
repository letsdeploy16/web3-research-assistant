<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Web3 Research Assistant</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
      overflow: hidden;
      height: 100vh;
      color: white;
      position: relative;
    }

    #appContainer {
      max-height: 100vh;
      overflow-y: auto;
      padding: 2rem 1rem 4rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 2.5rem;
      margin-top: 4rem;
      margin-bottom: 1rem;
      text-align: center;
      text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);
    }

    form {
      z-index: 2;
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(12px);
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      display: flex;
      flex-direction: column;
      gap: 1rem;
      min-width: 300px;
      max-width: 450px;
      width: 100%;
      margin-bottom: 2rem;
    }

    input {
      padding: 0.8rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.15);
      color: white;
      outline: none;
    }

    button {
      padding: 0.9rem;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      background: linear-gradient(145deg, #64b2ff, #1a72e8);
      color: white;
      cursor: pointer;
      transition: transform 0.3s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    button:hover { transform: scale(1.05); }

    #result {
      margin-top: 2rem;
      margin-bottom: 2rem;
      max-width: 700px;
      width: 100%;
      max-height: 600px;
      min-height: 300px;
      overflow-y: auto;
      background: rgba(255, 255, 255, 0.08);
      padding: 1.5rem;
      border-radius: 14px;
      white-space: pre-wrap;
      backdrop-filter: blur(8px);
      box-shadow: 0 4px 18px rgba(0, 0, 0, 0.25);
      z-index: 2;
    }

    #result::-webkit-scrollbar { width: 6px; }
    #result::-webkit-scrollbar-thumb {
      background: #64b2ff;
      border-radius: 10px;
    }

    .shooting-star {
      position: absolute;
      width: 150px;
      height: 2px;
      background: linear-gradient(45deg, white, rgba(255, 255, 255, 0));
      opacity: 0;
      transform: rotate(45deg);
      animation: shootStar 2s linear infinite;
    }

    @keyframes shootStar {
      0% { transform: translate(-200px, -200px) rotate(45deg); opacity: 0; }
      10% { opacity: 1; }
      100% { transform: translate(1400px, 1000px) rotate(45deg); opacity: 0; }
    }

    .stars {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      overflow: hidden;
      z-index: -1;
      pointer-events: none;
    }

    .stars::before {
      content: '';
      position: absolute;
      width: 1px;
      height: 1px;
      background: transparent;
      box-shadow:
        10vw 20vh white, 30vw 10vh white, 50vw 80vh white, 70vw 50vh white, 90vw 30vh white,
        20vw 60vh white, 40vw 90vh white, 60vw 40vh white, 80vw 70vh white, 95vw 10vh white,
        5vw 5vh white, 15vw 75vh white, 25vw 25vh white, 35vw 95vh white, 45vw 15vh white,
        55vw 85vh white, 65vw 35vh white, 75vw 65vh white, 85vw 45vh white, 98vw 95vh white,
        12vw 22vh white, 22vw 12vh white, 32vw 82vh white, 42vw 52vh white, 52vw 32vh white,
        62vw 62vh white, 72vw 42vh white, 82vw 72vh white, 92vw 22vh white, 99vw 99vh white;
      animation: twinkle 3s infinite ease-in-out alternate;
      opacity: 0.8;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body>
  <div id="appContainer">
    <h1>üåê Web-3 Research Assistant</h1>

    <form id="researchForm">
      <div id="solanaBalanceSection" style="margin-top: 2rem; text-align: center;">
        <h2>üîó Check SOL Balance</h2>
        <input type="text" id="solAddress" placeholder="Enter Solana Wallet Address" style="padding: 0.6rem; width: 80%; max-width: 400px; border-radius: 8px; border: none; margin-bottom: 1rem;" />
        <br />
        <button id="getBalanceBtn" style="padding: 0.6rem 1.2rem; font-weight: bold; border-radius: 8px; background: #1da1f2; color: white; border: none; cursor: pointer;">üí∞ Check Balance</button>
        <p id="balanceResult" style="margin-top: 1rem; font-weight: bold;"></p>
      </div>

      <input type="text" id="projectName" placeholder="Enter Web3 Project Name" required />
      <button type="submit">üöÄ Run Research</button>
    </form>

    <div id="result"></div>
  </div>

  <div class="stars"></div>

  <script>
    for (let i = 0; i < 10; i++) {
      const star = document.createElement('div');
      star.classList.add('shooting-star');
      star.style.top = `${Math.random() * 60}vh`;
      star.style.left = `${Math.random() * 60}vw`;
      star.style.animationDelay = `${Math.random() * 10}s`;
      star.style.animationDuration = `${1.8 + Math.random() * 2}s`;
      document.body.appendChild(star);
    }

    const form = document.getElementById('researchForm');
    const resultDiv = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const projectName = document.getElementById('projectName').value;
      resultDiv.textContent = '‚è≥ Fetching...';

      try {
        const res = await fetch('http://localhost:3000/research', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ projectName }),
        });

        const data = await res.json();
        resultDiv.textContent = data.result || `‚ùå Error: ${data.error}`;
      } catch (err) {
        resultDiv.textContent = `‚ùå Request failed: ${err.message}`;
      }
    });

    document.getElementById("getBalanceBtn").addEventListener("click", async (e) => {
      e.preventDefault();
      const address = document.getElementById("solAddress").value;
      const result = document.getElementById("balanceResult");

      if (!address) {
        result.textContent = "‚ùå Please enter a wallet address.";
        return;
      }

      result.textContent = "‚è≥ Checking balance...";

      try {
        const res = await fetch("http://127.0.0.1:3000/solana-balance", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ address }),
        });

        const data = await res.json();
        result.textContent = data.sol
          ? `‚úÖ Balance: ${data.sol} SOL`
          : `‚ùå Error: ${data.error}`;
      } catch (err) {
        result.textContent = `‚ùå Request failed: ${err.message}`;
      }
    });
  </script>
 <script src="js/script.js"></script>
</body>
</html>
